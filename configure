#!/usr/bin/env bash
if [ $(command -v nix-shell) ]; then
  CARGO_CMD='nix-shell -p cargo --run \"cargo build --release --manifest-path rslice2d/Cargo.toml\"'
elif [ $(command -v cargo) ]; then
  #cargo --version
  CARGO_CMD='cargo build --release --manifest-path rslice2d/Cargo.toml'
else
  echo "--------------------------------------------------------------------"
  echo "Cargo not found on PATH. Please install cargo / rustc:"
  echo ""
  echo " - brew install rustc (MacOS)"
  echo " - sudo apt-get install cargo (Debian/Ubuntu)"
  echo " - sudo yum install cargo (Fedora/CentOS)"
  echo "--------------------------------------------------------------------"
  echo ""
  exit 1;
fi

# only here if some command was found
sed -e s#\${cargo_cmd}#"${CARGO_CMD}"# Makevars.tmpl > src/Makevars

